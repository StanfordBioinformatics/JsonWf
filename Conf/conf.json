{ 

	"resources": {
		"reference": "/srv/gs1/projects/scg/Resources/GATK/hg19/ucsc.hg19.fasta",
		"dbsnp": "/srv/gs1/projects/scg/Resources/GATK/hg19-3.0/dbsnp_138.hg19.vcf",
		"gatk": "/srv/gs1/software/gatk/gatk-3.0/GenomeAnalysisTK-3.0-0/",
		"picard": "/srv/gs1/software/picard-tools/1.111",
		"ACMG_Genes": "/srv/gsfs0/projects/gbsc/Clinical_Service/dbases/acmg/refseq_acmg_genes.bed",
		"rModule": "r",
		"javaModule": "java/latest",
		"samtoolsModule": "samtools/0.1.19",
	
		"qsub": {
			"-M": "nathankw@stanford.edu",
			"-m": "a",
			"-A": "clinical-services",
			"-R": "y"
		}
	},
	
	"analyses": {

		"fastqc": {
			"program": "fastqc",
			"enable": 1,
			"modules": ["fastqc/0.10.1"],
			"inputFormat": "bam",

			"outdirs": {
				"d_fastqc": "${outdir}/fastqc"
			},

			"qsub": {
				"name": "FastQC",
				"mem": "1G"
			},
		
			"params": {
				"--threads": 5,
				"--outdir": "${d_fastqc}"
			},
		
			"args": ["${bam}"]
		},

		"flagstat": {
			"program": "samtools flagstat",
			"enable": 1,
			"modules": ["${samtoolsModule}"],
			"inputFormat": "bam",

			"outdirs": {
				"d_flagstat": "${outdir}/flagstat"
			},

			"outfiles": {
				"f_flagstat": "${d_flagstat}/flagstat.txt"
			},

			"qsub": {
				"name": "flagstat",
				"slots": 1,
				"mem": "3G"
			},
		
			"args": ["${bam}",">","${f_flagstat}"]
		},

		"DepthOfCoverage": {
			"enable": 1,
			"modules": ["${javaModule}"],
			"jar": "${gatk}/GenomeAnalysisTK.jar",
			"javavm": "-Xmx5G",
			"inputFormat": "bam",

			"outdirs": {
				"d_depthOfCoverage": "${outdir}/coverage"
			},
			
			"outfiles": {
				"f_depthOfCoverage": "${d_depthOfCoverage}/coverage"
			},
					
			"qsub": {
				"name": "DepthOfCoverage",
				"slots": 1,
				"mem": "12G"
			},

			"params": {
				"-T": "DepthOfCoverage",
		    "-L": "${ACMG_Genes}",
				"-R": "${reference}",
				"-I": "${bam}",
				"-o": "${f_depthOfCoverage}"
			}
		},

		"Concordance": {
			"enable": 1,
			"modules": ["${javaModule}"],
			"jar": "${gatk}/GenomeAnalysisTK.jar",
			"javavm": "-Xmx2G",
			"inputFormat": "vcf",

			"outdirs": {
				"d_concordance": "${outdir}/concordance"
			},

			"outfiles": {
				"f_concordance": "${d_concordance}/concordance.vcf"
			},

			"qsub": {
				"name": "SelectVariants_concordance",
				"slots": 8,
				"mem": "2G"
			},

			"params": {
				"-T": "SelectVariants",
		    "-L": "${ACMG_Genes}",
				"-nt": 8,
				"--variant": "${vcf}",
				"--concordance": "${dbsnp}",
				"-R": "${reference}",
				"-o": "${f_concordance}"
			}
		},

		"Discordance": {
			"enable": 1,
			"modules": ["${javaModule}"],
			"jar": "${gatk}/GenomeAnalysisTK.jar",
			"javavm": "-Xmx2G",
			"inputFormat": "vcf",

			"outdirs": {
				"d_discordance": "${outdir}/discordance"
			},

			"outfiles": {
				"f_discordance": "${d_discordance}/discordance.vcf"
			},

			"qsub": {
				"name": "SelectVariants_discordance",
				"slots": 8,
				"mem": "2G"
			},

			"params": {
				"-T": "SelectVariants",
		    "-L": "${ACMG_Genes}",
				"-nt" : 8,
				"--variant": "${vcf}",
				"--discordance": "${dbsnp}",
				"-R": "${reference}",
				"-o": "${f_discordance}"
			}
		},

		"VariantEval": {
			"enable": 1,
			"modules": ["${javaModule}"],
			"jar": "${gatk}/GenomeAnalysisTK.jar",
			"javavm": "-Xmx2G",
			"inputFormat": "vcf",

			"outdirs": {
				"d_variantEval": "${outdir}/variantEval"
			},

			"outfiles": {
				"f_variantEval": "${d_variantEval}/variantEval_metrics.txt"
			},

			"qsub": {
				"name": "VariantEval",
				"slots": 1,
				"mem": "6G"
			},

			"params": {
				"-nt": 8,
				"-T": "VariantEval",
		    "-L": "${ACMG_Genes}",
				"-R": "${reference}",
				"--eval:set1,vcf": "${vcf}",
				"-o": "${f_variantEval}",
				"-noEV": "",
				"-EV CountVariants -EV TiTvVariantEvaluator": "",
				"-noST": "",
				"-ST": "VariantType",
				"--dbsnp": "${dbsnp}"
			}
		},

		"GenotypeConcordance": {
			"enable": 1,
			"modules": ["${javaModule}"],
			"jar": "${gatk}/GenomeAnalysisTK.jar",
			"javavm": "-Xmx2G",
			"inputFormat": "vcf",

			"outdirs": {
				"d_genotypeConcordance": "${outdir}/gtConcordance"
			},

			"outfiles": {
				"f_genotypeConcordance": "${d_genotypeConcordance}/gtConcordance.txt"
			},

			"qsub": {
				"name": "GenotypeConcordance",
				"slots": 1,
				"mem": "6G"
			},

			"params": {
				"-T": "GenotypeConcordance",
				"-R": "${reference}",
				"--eval:set1,vcf": "${vcf}",
				"-o": "${f_genotypeConcordance}",
				"--comp": "${dbsnp}"
			}
		},

		"CollectAlignmentSummaryMetrics": {
			"enable": 1,
			"modules": ["${javaModule}"],
			"jar": "${picard}/CollectAlignmentSummaryMetrics.jar",
			"javavm": "-Xmx4G",
			"inputFormat": "bam",

			"outdirs": {
				"d_collectAlignmentSummaryMetrics": "${outdir}/alnSumMetrics"
			},
			
			"outfiles": {
				"f_collectAlignmentSummaryMetrics": "${d_collectAlignmentSummaryMetrics}/alnSummaryMetrics.txt"
			},

			"qsub": {
				"name": "CollectAlignmentSummaryMetrics",
				"slots": 1,
				"mem": "8G"
			},
		
			"params": {
				"ASSUME_SORTED=": "true",
				"INPUT=": "${bam}",
				"OUTPUT=": "${f_collectAlignmentSummaryMetrics}",
				"REFERENCE_SEQUENCE=": "${reference}",
				"METRIC_ACCUMULATION_LEVEL=": "ALL_READS"
			}
		},

		"CollectGcBiasMetrics": {
			"enable": 1,
			"modules": ["${javaModule}","${rModule}"],
			"jar": "${picard}/CollectGcBiasMetrics.jar",
			"javavm": "-Xmx4G",
			"inputFormat": "bam",

			"outdirs": {
				"d_collectGcBiasMetrics": "${outdir}/gcBiasMetrics"
			},

			"outfiles": {
				"f_collectGcBiasMetrics": "${d_collectGcBiasMetrics}/gcBiasMetrics.txt"
			},
			
			"qsub": {
				"name": "CollectGcBiasMetrics",
				"slots": 1,
				"mem": "8G"
			},
		
			"params": {
				"ASSUME_SORTED=": "true",
				"INPUT=": "${bam}",
				"OUTPUT=": "${f_collectGcBiasMetrics}",
				"REFERENCE_SEQUENCE=": "${reference}",
				"SUMMARY_OUTPUT=": "gcBiasMetrics_summary.txt",
				"CHART_OUTPUT=": "gcBiasMetrics_chart.pdf"
			}
		},

		"CollectInsertSizeMetrics": {
			"enable": 1,
			"modules": ["${javaModule}","${rModule}"],
			"jar": "${picard}/CollectInsertSizeMetrics.jar",
			"javavm": "-Xmx2G",
			"inputFormat": "bam",

			"outdirs": {
				"d_collectInsertSizeMetrics": "${outdir}/insertSizeMetrics"
			},
			
			"outfiles": {	
				"f_collectInsertSizeMetrics": "${d_collectInsertSizeMetrics}/insertSizeMetrics.txt"
			},
			
			"qsub": {
				"name": "CollectInsertSizeMetrics",
				"slots": 1,
				"mem": "5G"
			},
	
			"params": {
				"ASSUME_SORTED=": "true",
				"INPUT=": "${bam}",
				"OUTPUT=": "${f_collectInsertSizeMetrics}",
				"REFERENCE_SEQUENCE=": "${reference}",
				"METRIC_ACCUMULATION_LEVEL=": "ALL_READS",
				"HISTOGRAM_FILE=": "insertSizeHist.pdf"
			}
		},

		"MeanQualityByCycle": {
			"enable": 1,
			"modules": ["${javaModule}","${rModule}"],
			"jar": "${picard}/MeanQualityByCycle.jar",
			"javavm": "-Xmx2G",
			"inputFormat": "bam",

			"outdirs": {
				"d_meanQualityByCycle": "${outdir}/meanQualByCycle"
			},
		
			"outfiles": {
				"f_meanQualityByCycle": "${d_meanQualityByCycle}/meanQualitybyCycle.txt"
			},
			
			"qsub": {
				"name": "MeanQualityByCycle",
				"slots": 1,
				"mem": "5G"
			},
	
			"params": {
				"ASSUME_SORTED=": "true",
				"INPUT=": "${bam}",
				"OUTPUT=": "${f_meanQualityByCycle}",
				"REFERENCE_SEQUENCE=": "${reference}",
				"ALIGNED_READS_ONLY=": "true",
				"PF_READS_ONLY=": "true",
				"CHART_OUTPUT=": "meanQualityByCycle.pdf"
			}
		},

		"QualityScoreDistribution": {
			"enable": 1,
			"modules": ["${javaModule}","${rModule}"],
			"jar": "${picard}/QualityScoreDistribution.jar",
			"javavm": "-Xmx2G",
			"inputFormat": "bam",

			"outdirs": {
				"d_qualityScoreDistribution": "${outdir}/qcScoreDist"
			},

			"outfiles": {
				"f_qualityScoreDistribution": "${d_qualityScoreDistribution}/qualityScoreDist.txt"
			},
			
			
			"qsub": {
				"name": "QualityScoreDistribution",
				"slots": 1,
				"mem": "5G"
			},
	
			"params": {
				"ASSUME_SORTED=": "true",
				"INPUT=": "${bam}",
				"OUTPUT=": "${f_qualityScoreDistribution}",
				"REFERENCE_SEQUENCE=": "${reference}",
				"ALIGNED_READS_ONLY=": "true",
				"PF_READS_ONLY=": "true",
				"CHART_OUTPUT=": "qualityScoreDistribution.pdf"
			}
		}
	}
}
